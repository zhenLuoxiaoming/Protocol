{"ast":null,"code":"import { createNamespace, inBrowser } from '../utils';\nimport { raf, cancelRaf } from '../utils/dom/raf';\nimport { isSameSecond, parseTimeData, parseFormat } from './utils';\nvar _createNamespace = createNamespace('count-down'),\n  createComponent = _createNamespace[0],\n  bem = _createNamespace[1];\nexport default createComponent({\n  props: {\n    millisecond: Boolean,\n    time: {\n      type: [Number, String],\n      default: 0\n    },\n    format: {\n      type: String,\n      default: 'HH:mm:ss'\n    },\n    autoStart: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      remain: 0\n    };\n  },\n  computed: {\n    timeData: function timeData() {\n      return parseTimeData(this.remain);\n    },\n    formattedTime: function formattedTime() {\n      return parseFormat(this.format, this.timeData);\n    }\n  },\n  watch: {\n    time: {\n      immediate: true,\n      handler: 'reset'\n    }\n  },\n  activated: function activated() {\n    if (this.keepAlivePaused) {\n      this.counting = true;\n      this.keepAlivePaused = false;\n      this.tick();\n    }\n  },\n  deactivated: function deactivated() {\n    if (this.counting) {\n      this.pause();\n      this.keepAlivePaused = true;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.pause();\n  },\n  methods: {\n    // @exposed-api\n    start: function start() {\n      if (this.counting) {\n        return;\n      }\n      this.counting = true;\n      this.endTime = Date.now() + this.remain;\n      this.tick();\n    },\n    // @exposed-api\n    pause: function pause() {\n      this.counting = false;\n      cancelRaf(this.rafId);\n    },\n    // @exposed-api\n    reset: function reset() {\n      this.pause();\n      this.remain = +this.time;\n      if (this.autoStart) {\n        this.start();\n      }\n    },\n    tick: function tick() {\n      // should not start counting in server\n      // see: https://github.com/vant-ui/vant/issues/7807\n      if (!inBrowser) {\n        return;\n      }\n      if (this.millisecond) {\n        this.microTick();\n      } else {\n        this.macroTick();\n      }\n    },\n    microTick: function microTick() {\n      var _this = this;\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this.counting) {\n          return;\n        }\n        _this.setRemain(_this.getRemain());\n        if (_this.remain > 0) {\n          _this.microTick();\n        }\n      });\n    },\n    macroTick: function macroTick() {\n      var _this2 = this;\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this2.counting) {\n          return;\n        }\n        var remain = _this2.getRemain();\n        if (!isSameSecond(remain, _this2.remain) || remain === 0) {\n          _this2.setRemain(remain);\n        }\n        if (_this2.remain > 0) {\n          _this2.macroTick();\n        }\n      });\n    },\n    getRemain: function getRemain() {\n      return Math.max(this.endTime - Date.now(), 0);\n    },\n    setRemain: function setRemain(remain) {\n      this.remain = remain;\n      this.$emit('change', this.timeData);\n      if (remain === 0) {\n        this.pause();\n        this.$emit('finish');\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.slots('default', this.timeData) || this.formattedTime]);\n  }\n});","map":{"version":3,"names":["createNamespace","inBrowser","raf","cancelRaf","isSameSecond","parseTimeData","parseFormat","_createNamespace","createComponent","bem","props","millisecond","Boolean","time","type","Number","String","default","format","autoStart","data","remain","computed","timeData","formattedTime","watch","immediate","handler","activated","keepAlivePaused","counting","tick","deactivated","pause","beforeDestroy","methods","start","endTime","Date","now","rafId","reset","microTick","macroTick","_this","setRemain","getRemain","_this2","Math","max","$emit","render","h","arguments","slots"],"sources":["/Users/luoxiaoming/Desktop/Protocol/node_modules/vant/es/count-down/index.js"],"sourcesContent":["import { createNamespace, inBrowser } from '../utils';\nimport { raf, cancelRaf } from '../utils/dom/raf';\nimport { isSameSecond, parseTimeData, parseFormat } from './utils';\n\nvar _createNamespace = createNamespace('count-down'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    millisecond: Boolean,\n    time: {\n      type: [Number, String],\n      default: 0\n    },\n    format: {\n      type: String,\n      default: 'HH:mm:ss'\n    },\n    autoStart: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      remain: 0\n    };\n  },\n  computed: {\n    timeData: function timeData() {\n      return parseTimeData(this.remain);\n    },\n    formattedTime: function formattedTime() {\n      return parseFormat(this.format, this.timeData);\n    }\n  },\n  watch: {\n    time: {\n      immediate: true,\n      handler: 'reset'\n    }\n  },\n  activated: function activated() {\n    if (this.keepAlivePaused) {\n      this.counting = true;\n      this.keepAlivePaused = false;\n      this.tick();\n    }\n  },\n  deactivated: function deactivated() {\n    if (this.counting) {\n      this.pause();\n      this.keepAlivePaused = true;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.pause();\n  },\n  methods: {\n    // @exposed-api\n    start: function start() {\n      if (this.counting) {\n        return;\n      }\n\n      this.counting = true;\n      this.endTime = Date.now() + this.remain;\n      this.tick();\n    },\n    // @exposed-api\n    pause: function pause() {\n      this.counting = false;\n      cancelRaf(this.rafId);\n    },\n    // @exposed-api\n    reset: function reset() {\n      this.pause();\n      this.remain = +this.time;\n\n      if (this.autoStart) {\n        this.start();\n      }\n    },\n    tick: function tick() {\n      // should not start counting in server\n      // see: https://github.com/vant-ui/vant/issues/7807\n      if (!inBrowser) {\n        return;\n      }\n\n      if (this.millisecond) {\n        this.microTick();\n      } else {\n        this.macroTick();\n      }\n    },\n    microTick: function microTick() {\n      var _this = this;\n\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this.counting) {\n          return;\n        }\n\n        _this.setRemain(_this.getRemain());\n\n        if (_this.remain > 0) {\n          _this.microTick();\n        }\n      });\n    },\n    macroTick: function macroTick() {\n      var _this2 = this;\n\n      this.rafId = raf(function () {\n        /* istanbul ignore if */\n        // in case of call reset immediately after finish\n        if (!_this2.counting) {\n          return;\n        }\n\n        var remain = _this2.getRemain();\n\n        if (!isSameSecond(remain, _this2.remain) || remain === 0) {\n          _this2.setRemain(remain);\n        }\n\n        if (_this2.remain > 0) {\n          _this2.macroTick();\n        }\n      });\n    },\n    getRemain: function getRemain() {\n      return Math.max(this.endTime - Date.now(), 0);\n    },\n    setRemain: function setRemain(remain) {\n      this.remain = remain;\n      this.$emit('change', this.timeData);\n\n      if (remain === 0) {\n        this.pause();\n        this.$emit('finish');\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.slots('default', this.timeData) || this.formattedTime]);\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}