{"ast":null,"code":"export default {\n  name: 'HelloWorld',\n  data() {\n    return {\n      msg: '出错',\n      note: '',\n      bs64s: [],\n      ocrInfo: '',\n      show: 0,\n      sendNote: '',\n      appMethods: [{\n        title: '获取通讯录',\n        callMethod: () => this.normalCall({\n          method: 'selectAContact'\n        })\n      }, {\n        title: '上传通讯录',\n        callMethod: () => this.normalCall({\n          method: 'uploadContactList'\n        })\n      }, {\n        title: 'register通讯录',\n        callMethod: () => this.normalCall({\n          method: 'uploadRegisteredContactList'\n        })\n      }, {\n        title: '证件照',\n        callMethod: () => this.takePhoto({\n          method: 'takeCertificatePhoto',\n          params: {\n            token: '1',\n            type: 1,\n            url: 'url',\n            fileKey: 'fileKey',\n            getParams: 'getParams'\n          }\n        })\n      }, {\n        title: '拍照',\n        callMethod: () => this.takePhoto({\n          method: 'takeCertificatePhoto',\n          params: {\n            token: '1',\n            type: 1,\n            fileKey: 'fileKey',\n            getParams: 'getParams'\n          }\n        })\n      }, {\n        title: '拍照OCR',\n        callMethod: () => this.takePhoto({\n          method: 'takeOCRPhoto',\n          params: {\n            url: '1',\n            type: 1,\n            fileKey: 'fileKey',\n            getParams: 'getParams'\n          }\n        })\n      }, {\n        title: 'uploadApps',\n        callMethod: () => this.takePhoto({\n          method: 'uploadApps',\n          params: {\n            url: '1',\n            type: 1,\n            fileKey: 'fileKey',\n            getParams: 'getParams'\n          }\n        })\n      }, {\n        title: 'selectPhoto',\n        callMethod: () => this.takePhoto({\n          method: 'selectPhoto',\n          params: {\n            url: '1',\n            type: 1,\n            fileKey: 'fileKey',\n            getParams: 'getParams'\n          }\n        })\n      }, {\n        title: 'findMethoad',\n        callMethod: () => this.takePhoto({\n          method: 'findMethoad',\n          params: {\n            key: 'uploadApps'\n          }\n        })\n      }, {\n        title: 'versionCheck',\n        callMethod: () => this.takePhoto({\n          method: 'versionCheck',\n          params: {\n            key: 'uploadApps'\n          }\n        })\n      }, {\n        title: 'getAppInfo',\n        callMethod: () => this.takePhoto({\n          method: 'getAppInfo',\n          params: {\n            key: 'uploadApps'\n          }\n        })\n      }, {\n        title: 'getGps',\n        callMethod: () => this.takePhoto({\n          method: 'getGps',\n          params: {\n            key: 'uploadApps'\n          }\n        })\n      }, {\n        title: 'putStore',\n        callMethod: () => this.takePhoto({\n          method: 'putStore',\n          params: {\n            key: 'h5info',\n            value: 'h5info contents'\n          }\n        })\n      }, {\n        title: 'getStore',\n        callMethod: () => this.takePhoto({\n          method: 'getStore',\n          params: {\n            key: 'h5info',\n            value: 'h5info contents'\n          }\n        })\n      }, {\n        title: 'clearStore',\n        callMethod: () => this.takePhoto({\n          method: 'clearStore'\n        })\n      }]\n    };\n  },\n  mounted() {\n    document.title = 'fffoo';\n    window.WebViewJavascriptBridge.registerHandler('foo', (obj, resp) => {\n      console.log('obj is ' + obj);\n      resp('this is resp call back');\n    });\n    this.msg = '正常';\n  },\n  methods: {\n    callApp(name, data, callBack) {\n      this.bs64s = [];\n      this.ocrInfo = '';\n      this.sendNote = 'name: ' + name + '\\n' + 'callBack:' + (callBack != null) + '\\n' + JSON.stringify(data, null, 2);\n      window.WebViewJavascriptBridge.callHandler(name, data, callBack);\n    },\n    normalCall(data) {\n      this.callApp('h5', data, r => {\n        this.note = JSON.stringify(r, null, 2);\n      });\n    },\n    getInfo() {\n      airClass(this.id).then(r => {\n        this.info = r;\n        if (this.info.type == 1) {\n          this.$nextTick(() => {\n            this.makePlayer();\n          });\n        }\n      }).catch(e => {});\n    },\n    takePhoto(data) {\n      this.callApp('h5', data, r => {\n        if (r.success && r.data.url) {\n          let img = r.data.url;\n          this.bs64s = [img];\n          if (r.data.ocrResult) {\n            this.ocrInfo = JSON.stringify(r.data.ocrResult);\n          }\n        } else {\n          this.note = '收到App返回的数据：\\n' + JSON.stringify(r, null, 2);\n        }\n      });\n    },\n    onContact() {}\n  }\n};","map":{"version":3,"names":["name","data","msg","note","bs64s","ocrInfo","show","sendNote","appMethods","title","callMethod","normalCall","method","takePhoto","params","token","type","url","fileKey","getParams","key","value","mounted","document","window","WebViewJavascriptBridge","registerHandler","obj","resp","console","log","methods","callApp","callBack","JSON","stringify","callHandler","r","getInfo","airClass","id","then","info","$nextTick","makePlayer","catch","e","success","img","ocrResult","onContact"],"sources":["src/components/HelloWorld.vue"],"sourcesContent":["<template>\n\t<div class=\"page_container layout_v\" style=\"overflow: hidden;\">\n\t\t<div class=\"layout_h\" style=\"width: 100%;justify-content: space-around;\">\n\t\t\t<van-button  :class=\"show == 0 ? 'bt_select' : 'bt_unselect'\" style=\"width: 48%;\"  type=\"primary\" @click=\"show=0\">收到的数据</van-button>\n\t\t\t<van-button  :class=\"show == 1 ? 'bt_select' : 'bt_unselect'\" style=\"width: 48%;\"  type=\"primary\" @click=\"show=1\">发送的数据</van-button>\n\t\t</div>\n\t\t\n\t\t<div  v-if=\"show == 0\"  class=\"layout_h\" style=\"border: 1px solid black;width: 100%; height: 4rem; overflow: scroll;\">\n\t\t\t <textarea v-if=\"bs64s.length == 0\" style=\"width: 100%;\" readonly>\n\t\t\t\t {{note}}\n\t\t\t </textarea> \n\t\t\t <div v-else>\n\t\t\t\t <span v-if=\"ocrInfo.length > 0\">\n\t\t\t\t\t ocrInfo: {{ocrInfo}}\n\t\t\t\t </span>\n\t\t\t\t <img v-for=\"i in bs64s\" :src=\"i\"/>\n\t\t\t </div>\n\t\t</div>\n\t\t\n\t\t<div v-else class=\"layout_h\" style=\"border: 1px solid black;width: 100%; height: 4rem; overflow: scroll;\"> \n\t\t\t<textarea style=\"width: 100%;\" readonly>\n\t\t\t\t{{sendNote}}\n\t\t\t</textarea> \n\t\t</div>\n\t\t\n\t\t<div>测试桥接</div>\n\t\t<div>侨接状态:{{msg}}</div>\n\t\t\n\t\t<div class=\"bottom_container layout_v\" style=\"padding: 0.10rem; flex-grow: 1; overflow: scroll;\">\n\t\t\t<div class=\"layout_h\" style=\"margin-top: 12px; flex-wrap: wrap;\">\n\t\t\t  <van-button v-for=\"itme in appMethods\" style=\"width: 1.1rem;\" class=\"itemButton\" type=\"primary\" @click=\"itme.callMethod\">{{itme.title}}</van-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n  name: 'HelloWorld',\n  data() {\n  \treturn {\n\t\tmsg : '出错',\n\t\tnote : '',\n\t\tbs64s : [],\n\t\tocrInfo : '',\n\t\tshow : 0,\n\t\tsendNote : '',\n\t\tappMethods : [\n\t\t\t{\n\t\t\t\ttitle : '获取通讯录',\n\t\t\t\tcallMethod : ()=>this.normalCall({method : 'selectAContact'})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : '上传通讯录',\n\t\t\t\tcallMethod : ()=>this.normalCall({method : 'uploadContactList'})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'register通讯录',\n\t\t\t\tcallMethod : ()=>this.normalCall({method : 'uploadRegisteredContactList'})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : '证件照',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'takeCertificatePhoto', params : {token : '1', type : 1, url : 'url', fileKey : 'fileKey', getParams : 'getParams'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : '拍照',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'takeCertificatePhoto', params : {token : '1', type : 1, fileKey : 'fileKey', getParams : 'getParams'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : '拍照OCR',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'takeOCRPhoto', params : {url : '1', type : 1, fileKey : 'fileKey', getParams : 'getParams'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'uploadApps',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'uploadApps', params : {url : '1', type : 1, fileKey : 'fileKey', getParams : 'getParams'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'selectPhoto',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'selectPhoto', params : {url : '1', type : 1, fileKey : 'fileKey', getParams : 'getParams'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'findMethoad',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'findMethoad', params : {key : 'uploadApps'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'versionCheck',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'versionCheck', params : {key : 'uploadApps'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'getAppInfo',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'getAppInfo', params : {key : 'uploadApps'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'getGps',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'getGps', params : {key : 'uploadApps'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'putStore',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'putStore', params : {key : 'h5info', value : 'h5info contents'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'getStore',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'getStore', params : {key : 'h5info', value : 'h5info contents'}})\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle : 'clearStore',\n\t\t\t\tcallMethod : ()=>this.takePhoto({method : 'clearStore'})\n\t\t\t},\n\t\t]\n\t}\n  },\n  mounted() {\n\t  document.title = 'fffoo'\n\t  window.WebViewJavascriptBridge.registerHandler('foo', (obj, resp)=>{\n\t\t  console.log('obj is ' + obj)\n\t\t  resp('this is resp call back')\n\t  })\n      this.msg = '正常'\n  },\n  methods: {\n\tcallApp(name, data ,callBack) {\n\t  this.bs64s = []\n\t  this.ocrInfo = ''\n\t  this.sendNote = 'name: ' + name + '\\n' + 'callBack:' + (callBack != null) + '\\n' + JSON.stringify(data, null, 2) \n\t  window.WebViewJavascriptBridge.callHandler(name, data , callBack)\n\t},\n\tnormalCall(data) {\n\t\tthis.callApp('h5', data, r => {\n\t\t\tthis.note = JSON.stringify(r, null, 2)\n\t\t})\n\t},\n\tgetInfo() {\n\t  airClass(this.id).then(r=>{\n\t\tthis.info = r\n\t\tif (this.info.type == 1) {\n\t\t  this.$nextTick(()=>{\n\t\t\tthis.makePlayer()\n\t\t  })\n\t\t}\n\t  }).catch(e=>{\n\n\t  })\n\t},\n\ttakePhoto(data) {\n\t\tthis.callApp('h5', data, r => {\n\t\t\tif (r.success && r.data.url) {\n\t\t\t\tlet img = r.data.url\n\t\t\t\tthis.bs64s = [img]\n\t\t\t\tif (r.data.ocrResult) {\n\t\t\t\t\tthis.ocrInfo = JSON.stringify(r.data.ocrResult)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.note = '收到App返回的数据：\\n' + JSON.stringify(r, null, 2)\n\t\t\t}\n\t\t})\n\t},\n\tonContact() {\n\t\t\n\t}\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.page_container {\n\twidth: 100%;\n\theight:  100vh;\n}\n.itemButton:not(:nth-child(3n+1)) {\n\tmargin-left: 0.08rem;\n}\n\n.itemButton:nth-child(n + 4) {\n\tmargin-top: 0.08rem;\n}\n\n.bt_select {\n\tborder: 4px solid gainsboro;\n\tbackground-color: red;\n}\n\n.bt_unselect {\n\tbackground-color: limegreen;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}