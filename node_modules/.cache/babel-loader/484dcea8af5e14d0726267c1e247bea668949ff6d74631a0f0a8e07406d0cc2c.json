{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// Utils\nimport { createNamespace } from '../../utils'; // Components\n\nimport Uploader from '../../uploader';\nvar namespace = createNamespace('sku-img-uploader');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    uploadImg: Function,\n    customUpload: Function,\n    maxSize: {\n      type: Number,\n      default: 6\n    }\n  },\n  data: function data() {\n    return {\n      fileList: []\n    };\n  },\n  watch: {\n    value: function value(val) {\n      if (val) {\n        this.fileList = [{\n          url: val,\n          isImage: true\n        }];\n      } else {\n        this.fileList = [];\n      }\n    }\n  },\n  methods: {\n    afterReadFile: function afterReadFile(file) {\n      var _this = this;\n      file.status = 'uploading';\n      file.message = t('uploading');\n      this.uploadImg(file.file, file.content).then(function (img) {\n        file.status = 'done';\n        _this.$emit('input', img);\n      }).catch(function () {\n        file.status = 'failed';\n        file.message = t('fail');\n      });\n    },\n    onOversize: function onOversize() {\n      this.$toast(t('oversize', this.maxSize));\n    },\n    onDelete: function onDelete() {\n      this.$emit('input', '');\n    },\n    onClickUpload: function onClickUpload() {\n      var _this2 = this;\n      if (this.customUpload) {\n        this.customUpload().then(function (url) {\n          _this2.fileList.push({\n            url: url\n          });\n          _this2.$emit('input', url);\n        });\n      }\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n    var h = arguments[0];\n    return h(Uploader, {\n      \"attrs\": {\n        \"maxCount\": 1,\n        \"readonly\": !!this.customUpload,\n        \"maxSize\": this.maxSize * 1024 * 1024,\n        \"afterRead\": this.afterReadFile\n      },\n      \"on\": {\n        \"oversize\": this.onOversize,\n        \"delete\": this.onDelete,\n        \"click-upload\": this.onClickUpload\n      },\n      \"model\": {\n        value: _this3.fileList,\n        callback: function callback($$v) {\n          _this3.fileList = $$v;\n        }\n      }\n    });\n  }\n});","map":{"version":3,"names":["createNamespace","Uploader","namespace","createComponent","t","props","value","String","uploadImg","Function","customUpload","maxSize","type","Number","default","data","fileList","watch","val","url","isImage","methods","afterReadFile","file","_this","status","message","content","then","img","$emit","catch","onOversize","$toast","onDelete","onClickUpload","_this2","push","render","_this3","h","arguments","callback","$$v"],"sources":["/Users/luoxiaoming/Desktop/Protocol/node_modules/vant/es/sku/components/SkuImgUploader.js"],"sourcesContent":["// Utils\nimport { createNamespace } from '../../utils'; // Components\n\nimport Uploader from '../../uploader';\nvar namespace = createNamespace('sku-img-uploader');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    uploadImg: Function,\n    customUpload: Function,\n    maxSize: {\n      type: Number,\n      default: 6\n    }\n  },\n  data: function data() {\n    return {\n      fileList: []\n    };\n  },\n  watch: {\n    value: function value(val) {\n      if (val) {\n        this.fileList = [{\n          url: val,\n          isImage: true\n        }];\n      } else {\n        this.fileList = [];\n      }\n    }\n  },\n  methods: {\n    afterReadFile: function afterReadFile(file) {\n      var _this = this;\n\n      file.status = 'uploading';\n      file.message = t('uploading');\n      this.uploadImg(file.file, file.content).then(function (img) {\n        file.status = 'done';\n\n        _this.$emit('input', img);\n      }).catch(function () {\n        file.status = 'failed';\n        file.message = t('fail');\n      });\n    },\n    onOversize: function onOversize() {\n      this.$toast(t('oversize', this.maxSize));\n    },\n    onDelete: function onDelete() {\n      this.$emit('input', '');\n    },\n    onClickUpload: function onClickUpload() {\n      var _this2 = this;\n\n      if (this.customUpload) {\n        this.customUpload().then(function (url) {\n          _this2.fileList.push({\n            url: url\n          });\n\n          _this2.$emit('input', url);\n        });\n      }\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n\n    var h = arguments[0];\n    return h(Uploader, {\n      \"attrs\": {\n        \"maxCount\": 1,\n        \"readonly\": !!this.customUpload,\n        \"maxSize\": this.maxSize * 1024 * 1024,\n        \"afterRead\": this.afterReadFile\n      },\n      \"on\": {\n        \"oversize\": this.onOversize,\n        \"delete\": this.onDelete,\n        \"click-upload\": this.onClickUpload\n      },\n      \"model\": {\n        value: _this3.fileList,\n        callback: function callback($$v) {\n          _this3.fileList = $$v;\n        }\n      }\n    });\n  }\n});"],"mappings":";AAAA;AACA,SAASA,eAAe,QAAQ,aAAa,CAAC,CAAC;;AAE/C,OAAOC,QAAQ,MAAM,gBAAgB;AACrC,IAAIC,SAAS,GAAGF,eAAe,CAAC,kBAAkB,CAAC;AACnD,IAAIG,eAAe,GAAGD,SAAS,CAAC,CAAC,CAAC;AAClC,IAAIE,CAAC,GAAGF,SAAS,CAAC,CAAC,CAAC;AACpB,eAAeC,eAAe,CAAC;EAC7BE,KAAK,EAAE;IACLC,KAAK,EAAEC,MAAM;IACbC,SAAS,EAAEC,QAAQ;IACnBC,YAAY,EAAED,QAAQ;IACtBE,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,IAAI,EAAE,SAASA,IAAIA,CAAA,EAAG;IACpB,OAAO;MACLC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,KAAK,EAAE;IACLX,KAAK,EAAE,SAASA,KAAKA,CAACY,GAAG,EAAE;MACzB,IAAIA,GAAG,EAAE;QACP,IAAI,CAACF,QAAQ,GAAG,CAAC;UACfG,GAAG,EAAED,GAAG;UACRE,OAAO,EAAE;QACX,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,IAAI,CAACJ,QAAQ,GAAG,EAAE;MACpB;IACF;EACF,CAAC;EACDK,OAAO,EAAE;IACPC,aAAa,EAAE,SAASA,aAAaA,CAACC,IAAI,EAAE;MAC1C,IAAIC,KAAK,GAAG,IAAI;MAEhBD,IAAI,CAACE,MAAM,GAAG,WAAW;MACzBF,IAAI,CAACG,OAAO,GAAGtB,CAAC,CAAC,WAAW,CAAC;MAC7B,IAAI,CAACI,SAAS,CAACe,IAAI,CAACA,IAAI,EAAEA,IAAI,CAACI,OAAO,CAAC,CAACC,IAAI,CAAC,UAAUC,GAAG,EAAE;QAC1DN,IAAI,CAACE,MAAM,GAAG,MAAM;QAEpBD,KAAK,CAACM,KAAK,CAAC,OAAO,EAAED,GAAG,CAAC;MAC3B,CAAC,CAAC,CAACE,KAAK,CAAC,YAAY;QACnBR,IAAI,CAACE,MAAM,GAAG,QAAQ;QACtBF,IAAI,CAACG,OAAO,GAAGtB,CAAC,CAAC,MAAM,CAAC;MAC1B,CAAC,CAAC;IACJ,CAAC;IACD4B,UAAU,EAAE,SAASA,UAAUA,CAAA,EAAG;MAChC,IAAI,CAACC,MAAM,CAAC7B,CAAC,CAAC,UAAU,EAAE,IAAI,CAACO,OAAO,CAAC,CAAC;IAC1C,CAAC;IACDuB,QAAQ,EAAE,SAASA,QAAQA,CAAA,EAAG;MAC5B,IAAI,CAACJ,KAAK,CAAC,OAAO,EAAE,EAAE,CAAC;IACzB,CAAC;IACDK,aAAa,EAAE,SAASA,aAAaA,CAAA,EAAG;MACtC,IAAIC,MAAM,GAAG,IAAI;MAEjB,IAAI,IAAI,CAAC1B,YAAY,EAAE;QACrB,IAAI,CAACA,YAAY,EAAE,CAACkB,IAAI,CAAC,UAAUT,GAAG,EAAE;UACtCiB,MAAM,CAACpB,QAAQ,CAACqB,IAAI,CAAC;YACnBlB,GAAG,EAAEA;UACP,CAAC,CAAC;UAEFiB,MAAM,CAACN,KAAK,CAAC,OAAO,EAAEX,GAAG,CAAC;QAC5B,CAAC,CAAC;MACJ;IACF;EACF,CAAC;EACDmB,MAAM,EAAE,SAASA,MAAMA,CAAA,EAAG;IACxB,IAAIC,MAAM,GAAG,IAAI;IAEjB,IAAIC,CAAC,GAAGC,SAAS,CAAC,CAAC,CAAC;IACpB,OAAOD,CAAC,CAACvC,QAAQ,EAAE;MACjB,OAAO,EAAE;QACP,UAAU,EAAE,CAAC;QACb,UAAU,EAAE,CAAC,CAAC,IAAI,CAACS,YAAY;QAC/B,SAAS,EAAE,IAAI,CAACC,OAAO,GAAG,IAAI,GAAG,IAAI;QACrC,WAAW,EAAE,IAAI,CAACW;MACpB,CAAC;MACD,IAAI,EAAE;QACJ,UAAU,EAAE,IAAI,CAACU,UAAU;QAC3B,QAAQ,EAAE,IAAI,CAACE,QAAQ;QACvB,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC;MACD,OAAO,EAAE;QACP7B,KAAK,EAAEiC,MAAM,CAACvB,QAAQ;QACtB0B,QAAQ,EAAE,SAASA,QAAQA,CAACC,GAAG,EAAE;UAC/BJ,MAAM,CAACvB,QAAQ,GAAG2B,GAAG;QACvB;MACF;IACF,CAAC,CAAC;EACJ;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}