{"ast":null,"code":"// Utils\nimport { createNamespace } from '../../utils';\nimport { stringToDate, dateToString } from '../utils/time-helper'; // Components\n\nimport Popup from '../../popup';\nimport DateTimePicker from '../../datetime-picker';\nimport Field from '../../field';\nvar namespace = createNamespace('sku-datetime-field');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    label: String,\n    required: Boolean,\n    placeholder: String,\n    type: {\n      type: String,\n      default: 'date'\n    }\n  },\n  data: function data() {\n    return {\n      showDatePicker: false,\n      currentDate: this.type === 'time' ? '' : new Date(),\n      minDate: new Date(new Date().getFullYear() - 60, 0, 1)\n    };\n  },\n  watch: {\n    value: function value(val) {\n      switch (this.type) {\n        case 'time':\n          this.currentDate = val;\n          break;\n        case 'date':\n        case 'datetime':\n          this.currentDate = stringToDate(val) || new Date();\n          break;\n      }\n    }\n  },\n  computed: {\n    title: function title() {\n      return t(\"title.\" + this.type);\n    }\n  },\n  methods: {\n    onClick: function onClick() {\n      this.showDatePicker = true;\n    },\n    onConfirm: function onConfirm(val) {\n      var data = val;\n      if (this.type !== 'time') {\n        data = dateToString(val, this.type);\n      }\n      this.$emit('input', data);\n      this.showDatePicker = false;\n    },\n    onCancel: function onCancel() {\n      this.showDatePicker = false;\n    },\n    formatter: function formatter(type, val) {\n      var word = t(\"format.\" + type);\n      return \"\" + val + word;\n    }\n  },\n  render: function render() {\n    var _this = this;\n    var h = arguments[0];\n    return h(Field, {\n      \"attrs\": {\n        \"readonly\": true,\n        \"is-link\": true,\n        \"center\": true,\n        \"value\": this.value,\n        \"label\": this.label,\n        \"required\": this.required,\n        \"placeholder\": this.placeholder\n      },\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"position\": \"bottom\",\n        \"getContainer\": \"body\"\n      },\n      \"slot\": \"extra\",\n      \"model\": {\n        value: _this.showDatePicker,\n        callback: function callback($$v) {\n          _this.showDatePicker = $$v;\n        }\n      }\n    }, [h(DateTimePicker, {\n      \"attrs\": {\n        \"type\": this.type,\n        \"title\": this.title,\n        \"value\": this.currentDate,\n        \"minDate\": this.minDate,\n        \"formatter\": this.formatter\n      },\n      \"on\": {\n        \"cancel\": this.onCancel,\n        \"confirm\": this.onConfirm\n      }\n    })])]);\n  }\n});","map":{"version":3,"names":["createNamespace","stringToDate","dateToString","Popup","DateTimePicker","Field","namespace","createComponent","t","props","value","String","label","required","Boolean","placeholder","type","default","data","showDatePicker","currentDate","Date","minDate","getFullYear","watch","val","computed","title","methods","onClick","onConfirm","$emit","onCancel","formatter","word","render","_this","h","arguments","callback","$$v"],"sources":["/Users/luoxiaoming/Desktop/test-html/node_modules/vant/es/sku/components/SkuDateTimeField.js"],"sourcesContent":["// Utils\nimport { createNamespace } from '../../utils';\nimport { stringToDate, dateToString } from '../utils/time-helper'; // Components\n\nimport Popup from '../../popup';\nimport DateTimePicker from '../../datetime-picker';\nimport Field from '../../field';\nvar namespace = createNamespace('sku-datetime-field');\nvar createComponent = namespace[0];\nvar t = namespace[2];\nexport default createComponent({\n  props: {\n    value: String,\n    label: String,\n    required: Boolean,\n    placeholder: String,\n    type: {\n      type: String,\n      default: 'date'\n    }\n  },\n  data: function data() {\n    return {\n      showDatePicker: false,\n      currentDate: this.type === 'time' ? '' : new Date(),\n      minDate: new Date(new Date().getFullYear() - 60, 0, 1)\n    };\n  },\n  watch: {\n    value: function value(val) {\n      switch (this.type) {\n        case 'time':\n          this.currentDate = val;\n          break;\n\n        case 'date':\n        case 'datetime':\n          this.currentDate = stringToDate(val) || new Date();\n          break;\n      }\n    }\n  },\n  computed: {\n    title: function title() {\n      return t(\"title.\" + this.type);\n    }\n  },\n  methods: {\n    onClick: function onClick() {\n      this.showDatePicker = true;\n    },\n    onConfirm: function onConfirm(val) {\n      var data = val;\n\n      if (this.type !== 'time') {\n        data = dateToString(val, this.type);\n      }\n\n      this.$emit('input', data);\n      this.showDatePicker = false;\n    },\n    onCancel: function onCancel() {\n      this.showDatePicker = false;\n    },\n    formatter: function formatter(type, val) {\n      var word = t(\"format.\" + type);\n      return \"\" + val + word;\n    }\n  },\n  render: function render() {\n    var _this = this;\n\n    var h = arguments[0];\n    return h(Field, {\n      \"attrs\": {\n        \"readonly\": true,\n        \"is-link\": true,\n        \"center\": true,\n        \"value\": this.value,\n        \"label\": this.label,\n        \"required\": this.required,\n        \"placeholder\": this.placeholder\n      },\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [h(Popup, {\n      \"attrs\": {\n        \"round\": true,\n        \"position\": \"bottom\",\n        \"getContainer\": \"body\"\n      },\n      \"slot\": \"extra\",\n      \"model\": {\n        value: _this.showDatePicker,\n        callback: function callback($$v) {\n          _this.showDatePicker = $$v;\n        }\n      }\n    }, [h(DateTimePicker, {\n      \"attrs\": {\n        \"type\": this.type,\n        \"title\": this.title,\n        \"value\": this.currentDate,\n        \"minDate\": this.minDate,\n        \"formatter\": this.formatter\n      },\n      \"on\": {\n        \"cancel\": this.onCancel,\n        \"confirm\": this.onConfirm\n      }\n    })])]);\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}