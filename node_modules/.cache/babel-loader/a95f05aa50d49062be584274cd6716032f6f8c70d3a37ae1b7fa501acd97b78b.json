{"ast":null,"code":"import { createNamespace } from '../utils';\nimport { RED } from '../utils/constant';\nimport { padZero } from '../utils/format/string';\nimport Checkbox from '../checkbox';\nvar _createNamespace = createNamespace('coupon'),\n  createComponent = _createNamespace[0],\n  bem = _createNamespace[1],\n  t = _createNamespace[2];\nfunction formatTimeStamp(timeStamp) {\n  // compatible when the timestamp is seconds\n  if (timeStamp < Math.pow(10, 12)) {\n    return timeStamp * 1000;\n  }\n  return +timeStamp;\n}\nfunction getDate(timeStamp) {\n  var date = new Date(formatTimeStamp(timeStamp));\n  return date.getFullYear() + \".\" + padZero(date.getMonth() + 1) + \".\" + padZero(date.getDate());\n}\nfunction formatDiscount(discount) {\n  return (discount / 10).toFixed(discount % 10 === 0 ? 0 : 1);\n}\nfunction formatAmount(amount) {\n  return (amount / 100).toFixed(amount % 100 === 0 ? 0 : amount % 10 === 0 ? 1 : 2);\n}\nexport default createComponent({\n  props: {\n    coupon: Object,\n    chosen: Boolean,\n    disabled: Boolean,\n    currency: {\n      type: String,\n      default: '¥'\n    }\n  },\n  computed: {\n    validPeriod: function validPeriod() {\n      var _this$coupon = this.coupon,\n        startAt = _this$coupon.startAt,\n        endAt = _this$coupon.endAt,\n        customValidPeriod = _this$coupon.customValidPeriod;\n      return customValidPeriod || getDate(startAt) + \" - \" + getDate(endAt);\n    },\n    faceAmount: function faceAmount() {\n      var coupon = this.coupon;\n      if (coupon.valueDesc) {\n        return coupon.valueDesc + \"<span>\" + (coupon.unitDesc || '') + \"</span>\";\n      }\n      if (coupon.denominations) {\n        var denominations = formatAmount(coupon.denominations);\n        return \"<span>\" + this.currency + \"</span> \" + denominations;\n      }\n      if (coupon.discount) {\n        return t('discount', formatDiscount(coupon.discount));\n      }\n      return '';\n    },\n    conditionMessage: function conditionMessage() {\n      var condition = formatAmount(this.coupon.originCondition);\n      return condition === '0' ? t('unlimited') : t('condition', condition);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var coupon = this.coupon,\n      disabled = this.disabled;\n    var description = disabled && coupon.reason || coupon.description;\n    return h(\"div\", {\n      \"class\": bem({\n        disabled: disabled\n      })\n    }, [h(\"div\", {\n      \"class\": bem('content')\n    }, [h(\"div\", {\n      \"class\": bem('head')\n    }, [h(\"h2\", {\n      \"class\": bem('amount'),\n      \"domProps\": {\n        \"innerHTML\": this.faceAmount\n      }\n    }), h(\"p\", {\n      \"class\": bem('condition')\n    }, [this.coupon.condition || this.conditionMessage])]), h(\"div\", {\n      \"class\": bem('body')\n    }, [h(\"p\", {\n      \"class\": bem('name')\n    }, [coupon.name]), h(\"p\", {\n      \"class\": bem('valid')\n    }, [this.validPeriod]), !this.disabled && h(Checkbox, {\n      \"attrs\": {\n        \"size\": 18,\n        \"value\": this.chosen,\n        \"checkedColor\": RED\n      },\n      \"class\": bem('corner')\n    })])]), description && h(\"p\", {\n      \"class\": bem('description')\n    }, [description])]);\n  }\n});","map":{"version":3,"names":["createNamespace","RED","padZero","Checkbox","_createNamespace","createComponent","bem","t","formatTimeStamp","timeStamp","Math","pow","getDate","date","Date","getFullYear","getMonth","formatDiscount","discount","toFixed","formatAmount","amount","props","coupon","Object","chosen","Boolean","disabled","currency","type","String","default","computed","validPeriod","_this$coupon","startAt","endAt","customValidPeriod","faceAmount","valueDesc","unitDesc","denominations","conditionMessage","condition","originCondition","render","h","arguments","description","reason","name"],"sources":["/Users/luoxiaoming/Desktop/test-html/node_modules/vant/es/coupon/index.js"],"sourcesContent":["import { createNamespace } from '../utils';\nimport { RED } from '../utils/constant';\nimport { padZero } from '../utils/format/string';\nimport Checkbox from '../checkbox';\n\nvar _createNamespace = createNamespace('coupon'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nfunction formatTimeStamp(timeStamp) {\n  // compatible when the timestamp is seconds\n  if (timeStamp < Math.pow(10, 12)) {\n    return timeStamp * 1000;\n  }\n\n  return +timeStamp;\n}\n\nfunction getDate(timeStamp) {\n  var date = new Date(formatTimeStamp(timeStamp));\n  return date.getFullYear() + \".\" + padZero(date.getMonth() + 1) + \".\" + padZero(date.getDate());\n}\n\nfunction formatDiscount(discount) {\n  return (discount / 10).toFixed(discount % 10 === 0 ? 0 : 1);\n}\n\nfunction formatAmount(amount) {\n  return (amount / 100).toFixed(amount % 100 === 0 ? 0 : amount % 10 === 0 ? 1 : 2);\n}\n\nexport default createComponent({\n  props: {\n    coupon: Object,\n    chosen: Boolean,\n    disabled: Boolean,\n    currency: {\n      type: String,\n      default: '¥'\n    }\n  },\n  computed: {\n    validPeriod: function validPeriod() {\n      var _this$coupon = this.coupon,\n          startAt = _this$coupon.startAt,\n          endAt = _this$coupon.endAt,\n          customValidPeriod = _this$coupon.customValidPeriod;\n      return customValidPeriod || getDate(startAt) + \" - \" + getDate(endAt);\n    },\n    faceAmount: function faceAmount() {\n      var coupon = this.coupon;\n\n      if (coupon.valueDesc) {\n        return coupon.valueDesc + \"<span>\" + (coupon.unitDesc || '') + \"</span>\";\n      }\n\n      if (coupon.denominations) {\n        var denominations = formatAmount(coupon.denominations);\n        return \"<span>\" + this.currency + \"</span> \" + denominations;\n      }\n\n      if (coupon.discount) {\n        return t('discount', formatDiscount(coupon.discount));\n      }\n\n      return '';\n    },\n    conditionMessage: function conditionMessage() {\n      var condition = formatAmount(this.coupon.originCondition);\n      return condition === '0' ? t('unlimited') : t('condition', condition);\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var coupon = this.coupon,\n        disabled = this.disabled;\n    var description = disabled && coupon.reason || coupon.description;\n    return h(\"div\", {\n      \"class\": bem({\n        disabled: disabled\n      })\n    }, [h(\"div\", {\n      \"class\": bem('content')\n    }, [h(\"div\", {\n      \"class\": bem('head')\n    }, [h(\"h2\", {\n      \"class\": bem('amount'),\n      \"domProps\": {\n        \"innerHTML\": this.faceAmount\n      }\n    }), h(\"p\", {\n      \"class\": bem('condition')\n    }, [this.coupon.condition || this.conditionMessage])]), h(\"div\", {\n      \"class\": bem('body')\n    }, [h(\"p\", {\n      \"class\": bem('name')\n    }, [coupon.name]), h(\"p\", {\n      \"class\": bem('valid')\n    }, [this.validPeriod]), !this.disabled && h(Checkbox, {\n      \"attrs\": {\n        \"size\": 18,\n        \"value\": this.chosen,\n        \"checkedColor\": RED\n      },\n      \"class\": bem('corner')\n    })])]), description && h(\"p\", {\n      \"class\": bem('description')\n    }, [description])]);\n  }\n});"],"mappings":"AAAA,SAASA,eAAe,QAAQ,UAAU;AAC1C,SAASC,GAAG,QAAQ,mBAAmB;AACvC,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAOC,QAAQ,MAAM,aAAa;AAElC,IAAIC,gBAAgB,GAAGJ,eAAe,CAAC,QAAQ,CAAC;EAC5CK,eAAe,GAAGD,gBAAgB,CAAC,CAAC,CAAC;EACrCE,GAAG,GAAGF,gBAAgB,CAAC,CAAC,CAAC;EACzBG,CAAC,GAAGH,gBAAgB,CAAC,CAAC,CAAC;AAE3B,SAASI,eAAeA,CAACC,SAAS,EAAE;EAClC;EACA,IAAIA,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE;IAChC,OAAOF,SAAS,GAAG,IAAI;EACzB;EAEA,OAAO,CAACA,SAAS;AACnB;AAEA,SAASG,OAAOA,CAACH,SAAS,EAAE;EAC1B,IAAII,IAAI,GAAG,IAAIC,IAAI,CAACN,eAAe,CAACC,SAAS,CAAC,CAAC;EAC/C,OAAOI,IAAI,CAACE,WAAW,EAAE,GAAG,GAAG,GAAGb,OAAO,CAACW,IAAI,CAACG,QAAQ,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGd,OAAO,CAACW,IAAI,CAACD,OAAO,EAAE,CAAC;AAChG;AAEA,SAASK,cAAcA,CAACC,QAAQ,EAAE;EAChC,OAAO,CAACA,QAAQ,GAAG,EAAE,EAAEC,OAAO,CAACD,QAAQ,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC7D;AAEA,SAASE,YAAYA,CAACC,MAAM,EAAE;EAC5B,OAAO,CAACA,MAAM,GAAG,GAAG,EAAEF,OAAO,CAACE,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,GAAGA,MAAM,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACnF;AAEA,eAAehB,eAAe,CAAC;EAC7BiB,KAAK,EAAE;IACLC,MAAM,EAAEC,MAAM;IACdC,MAAM,EAAEC,OAAO;IACfC,QAAQ,EAAED,OAAO;IACjBE,QAAQ,EAAE;MACRC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,WAAW,EAAE,SAASA,WAAWA,CAAA,EAAG;MAClC,IAAIC,YAAY,GAAG,IAAI,CAACX,MAAM;QAC1BY,OAAO,GAAGD,YAAY,CAACC,OAAO;QAC9BC,KAAK,GAAGF,YAAY,CAACE,KAAK;QAC1BC,iBAAiB,GAAGH,YAAY,CAACG,iBAAiB;MACtD,OAAOA,iBAAiB,IAAIzB,OAAO,CAACuB,OAAO,CAAC,GAAG,KAAK,GAAGvB,OAAO,CAACwB,KAAK,CAAC;IACvE,CAAC;IACDE,UAAU,EAAE,SAASA,UAAUA,CAAA,EAAG;MAChC,IAAIf,MAAM,GAAG,IAAI,CAACA,MAAM;MAExB,IAAIA,MAAM,CAACgB,SAAS,EAAE;QACpB,OAAOhB,MAAM,CAACgB,SAAS,GAAG,QAAQ,IAAIhB,MAAM,CAACiB,QAAQ,IAAI,EAAE,CAAC,GAAG,SAAS;MAC1E;MAEA,IAAIjB,MAAM,CAACkB,aAAa,EAAE;QACxB,IAAIA,aAAa,GAAGrB,YAAY,CAACG,MAAM,CAACkB,aAAa,CAAC;QACtD,OAAO,QAAQ,GAAG,IAAI,CAACb,QAAQ,GAAG,UAAU,GAAGa,aAAa;MAC9D;MAEA,IAAIlB,MAAM,CAACL,QAAQ,EAAE;QACnB,OAAOX,CAAC,CAAC,UAAU,EAAEU,cAAc,CAACM,MAAM,CAACL,QAAQ,CAAC,CAAC;MACvD;MAEA,OAAO,EAAE;IACX,CAAC;IACDwB,gBAAgB,EAAE,SAASA,gBAAgBA,CAAA,EAAG;MAC5C,IAAIC,SAAS,GAAGvB,YAAY,CAAC,IAAI,CAACG,MAAM,CAACqB,eAAe,CAAC;MACzD,OAAOD,SAAS,KAAK,GAAG,GAAGpC,CAAC,CAAC,WAAW,CAAC,GAAGA,CAAC,CAAC,WAAW,EAAEoC,SAAS,CAAC;IACvE;EACF,CAAC;EACDE,MAAM,EAAE,SAASA,MAAMA,CAAA,EAAG;IACxB,IAAIC,CAAC,GAAGC,SAAS,CAAC,CAAC,CAAC;IACpB,IAAIxB,MAAM,GAAG,IAAI,CAACA,MAAM;MACpBI,QAAQ,GAAG,IAAI,CAACA,QAAQ;IAC5B,IAAIqB,WAAW,GAAGrB,QAAQ,IAAIJ,MAAM,CAAC0B,MAAM,IAAI1B,MAAM,CAACyB,WAAW;IACjE,OAAOF,CAAC,CAAC,KAAK,EAAE;MACd,OAAO,EAAExC,GAAG,CAAC;QACXqB,QAAQ,EAAEA;MACZ,CAAC;IACH,CAAC,EAAE,CAACmB,CAAC,CAAC,KAAK,EAAE;MACX,OAAO,EAAExC,GAAG,CAAC,SAAS;IACxB,CAAC,EAAE,CAACwC,CAAC,CAAC,KAAK,EAAE;MACX,OAAO,EAAExC,GAAG,CAAC,MAAM;IACrB,CAAC,EAAE,CAACwC,CAAC,CAAC,IAAI,EAAE;MACV,OAAO,EAAExC,GAAG,CAAC,QAAQ,CAAC;MACtB,UAAU,EAAE;QACV,WAAW,EAAE,IAAI,CAACgC;MACpB;IACF,CAAC,CAAC,EAAEQ,CAAC,CAAC,GAAG,EAAE;MACT,OAAO,EAAExC,GAAG,CAAC,WAAW;IAC1B,CAAC,EAAE,CAAC,IAAI,CAACiB,MAAM,CAACoB,SAAS,IAAI,IAAI,CAACD,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAEI,CAAC,CAAC,KAAK,EAAE;MAC/D,OAAO,EAAExC,GAAG,CAAC,MAAM;IACrB,CAAC,EAAE,CAACwC,CAAC,CAAC,GAAG,EAAE;MACT,OAAO,EAAExC,GAAG,CAAC,MAAM;IACrB,CAAC,EAAE,CAACiB,MAAM,CAAC2B,IAAI,CAAC,CAAC,EAAEJ,CAAC,CAAC,GAAG,EAAE;MACxB,OAAO,EAAExC,GAAG,CAAC,OAAO;IACtB,CAAC,EAAE,CAAC,IAAI,CAAC2B,WAAW,CAAC,CAAC,EAAE,CAAC,IAAI,CAACN,QAAQ,IAAImB,CAAC,CAAC3C,QAAQ,EAAE;MACpD,OAAO,EAAE;QACP,MAAM,EAAE,EAAE;QACV,OAAO,EAAE,IAAI,CAACsB,MAAM;QACpB,cAAc,EAAExB;MAClB,CAAC;MACD,OAAO,EAAEK,GAAG,CAAC,QAAQ;IACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE0C,WAAW,IAAIF,CAAC,CAAC,GAAG,EAAE;MAC5B,OAAO,EAAExC,GAAG,CAAC,aAAa;IAC5B,CAAC,EAAE,CAAC0C,WAAW,CAAC,CAAC,CAAC,CAAC;EACrB;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}